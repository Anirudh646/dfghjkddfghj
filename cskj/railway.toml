[build]
builder = "nixpacks"

[deploy]
healthcheckPath = "/health"
healthcheckTimeout = 300
restartPolicyType = "on_failure"
restartPolicyMaxRetries = 3

[[services]]
name = "backend"
source = "."
variables = { PORT = "8000" }

[services.healthcheck]
path = "/health"
timeout = 300

[[services]]
name = "frontend" 
source = "./frontend"
variables = { PORT = "3000" }

[services.healthcheck]
path = "/"
timeout = 300
